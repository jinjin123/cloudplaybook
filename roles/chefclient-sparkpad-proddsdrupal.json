{
  "name": "chefclient-sparkpad-proddsdrupal",
  "description": "Role json file for starting and maintaining Sparkpad ZKF drupal backend",
  "json_class": "Chef::Role",
  "default_attributes": {
    "deployuser": "root",
    "projectname": "kungfudingcan",
    "externalmode": "bootproxy",
    "domainname": "kungfudingcan.com",
    "docker": {
      "privaterepo": "dockerpriv.kybot.io:5002",
      "username": "keithyau",
      "password": "thomas123"
    },
    "deploycode": {
      "basedirectory": "/app/web/",
      "configuration": {
        "general": {
          "bootproxy": {
            "spzkf_enablenginxlog": "/etc/nginx/nginx.conf"
          },
          "de": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "pmt": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "crm": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "mkt": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "erp": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "cc": {
            "spzkf.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "loadbalancer": {
            "loadbalancer.conf": "/etc/nginx/conf.d/default.conf"
          }
        },
        "drupal": {
          "de": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dsde.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          },
          "pmt": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dspmt.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          },
          "crm": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dscrm.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          },
          "mkt": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dsmkt.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          },
          "erp": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dserp.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          },
          "cc": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "spzkf_dscc.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "172.16.103.127",
              "dbuser": "root",
              "dbpass": "Spark123!"
            }
          }
        }
      },
      "localfolder": {
        "welcome": {
          "giturl": "git@bitbucket.org:chankongching/bootdev_welcome.git",
          "branch": "master"
        },
        "cc": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-cc.git",
          "branch": "dianshan-dev"
        },
        "de": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-de.git",
          "branch": "commerce"
        },
        "pmt": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-pmt.git",
          "branch": "dianshang"
        },
        "crm": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-crm.git",
          "branch": "dianshang"
        },
        "erp": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-erp.git",
          "branch": "dev"
        },
        "mkt": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-mkt.git",
          "branch": "dianshang"
        },
        "memcached": "nodownload",
        "bootproxy": "nodownload",
        "loadbalancer": "nodownload"
      },
      "runtime": {
        "memcached": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/memcached"
        },
        "welcome": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "mountlocal": "localdir",
          "mountdocker": "/var/www/html",
          "ports": "9080:80"
        },
        "de": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_DE_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/de:/var/www/html"
          ],
          "ports": "9081:80"
        },
        "pmt": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_PMT_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/pmt:/var/www/html"
          ],
          "ports": "9082:80"
        },
        "crm": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_CRM_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/crm:/var/www/html"
          ],
          "ports": "9083:80"
        },
        "mkt": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_MKT_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/mkt:/var/www/html"
          ],
          "ports": "9084:80"
        },
        "erp": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_ERP_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/erp:/var/www/html"
          ],
          "ports": "9085:80"
        },
        "cc": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=b01487901593e2c9d5691180152c46dd59682599", "NEWRELICAPPNAME=DS_CC_production"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/app/web/cc:/var/www/html"
          ],
          "ports": "9087:80"
        },
        "loadbalancer": {
          "tag": "stable-alpine",
          "image": "daocloud.io/library/nginx",
          "mountlocal": "multipledir",
          "mountdocker": [
            "/etc/hosts:/etc/hosts",
            "/usr/bin/curl:/usr/bin/curl"
          ],
          "ports": "80:80",
          "network_mode": "host"
        },
        "bootproxy": {
          "tag": "stable-alpine",
          "image": "daocloud.io/library/nginx",
          "mountlocal": "localdir",
          "mountdocker": "/etc/nginx/conf.d/",
          "ports": [
            "8888:80"
          ]
        }
      }
    }
  },
  "override_attributes": {},
  "chef_type": "role",
  "run_list": [
    "recipe[git]",
    "recipe[build-essential]",
    "recipe[basicservice]",
    "recipe[deploycode]",
    "recipe[configs]",
    "recipe[drupalsetting]",
    "recipe[webserver]"
  ],
  "env_run_lists": {}
}
