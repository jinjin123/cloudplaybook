{
  "name": "chefclient-sparkpad-liansuola-gp2gtdxprod",
  "description": "Role json file for starting and maintaining Sparkpad Generic Platform season2 gtdx",
  "json_class": "Chef::Role",
  "default_attributes": {
    "deployuser": "ec2-user",
    "projectname": "sparkpadgp",
    "externalmode": "bootproxy",
    "domainname": "liansuola.com",
    "docker": {
      "privaterepo": "dockerpriv.kybot.io:5002",
      "username": "keithyau",
      "password": "thomas123"
    },
    "deploycode": {
      "basedirectory": "/home/ec2-user/tools/drupal_dir/",
      "configuration": {
        "general": {
          "bootproxy": {
            "tv.bootproxy.nginx.conf": "/etc/nginx/nginx.conf"
          },
          "erp": {
            "spgp.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "de": {
            "spgp.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "pmt": {
            "spgp.nginx.conf": "/usr/local/nginx/conf/nginx.conf"
          },
          "wmserver": {
            "cert.conf": "/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/security/cert"
          },
          "orderserver": {
            "cert.conf": "/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/security/cert"
          },
          "reportingsys":{
            "liansuolareportingsysgtdxenv": "/var/www/html/.env",
            "liansuolareportingsysgtdxexterna_connection_db": "/var/www/html/config/externa_connection_db.php"
          }
        },
        "drupal": {
          "erp": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "general.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "sm12g5l9d32eyun.cjwa2zciaejp.rds.cn-north-1.amazonaws.com.cn",
              "dbuser": "keithyau",
              "dbpass": "thomas123",
              "dbname": "gtdxerp"
            }
          },
          "de": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "general.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "sm12g5l9d32eyun.cjwa2zciaejp.rds.cn-north-1.amazonaws.com.cn",
              "dbuser": "keithyau",
              "dbpass": "thomas123",
              "dbname": "gtdxde"
            }
          },
          "pmt": {
            "folders": {
              "sites/default/files": "777",
              "sites/default/privates": "777"
            },
            "settings": {
              "general.settings.php": "sites/default/settings.php"
            },
            "variables": {
              "dbhost": "sm12g5l9d32eyun.cjwa2zciaejp.rds.cn-north-1.amazonaws.com.cn",
              "dbuser": "keithyau",
              "dbpass": "thomas123",
              "dbname": "gtdxpayment"
            }
          }
        }
      },
      "localfolder": {
        "de": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-de.git",
          "branch": "master"
        },
        "oc": {
          "giturl": "git@git.coding.net:keithyau/deploymentoc.git",
          "branch": "master"
        },
        "tsoc": {
          "giturl": "git@git.coding.net:keithyau/deploymenttsoc.git",
          "branch": "master"
        },
        "pmt": {
          "giturl": "git@git.coding.net:keithyau/sparkpad-drupal-backend-pmt.git",
          "branch": "master"
        },
        "erp": {
          "giturl": "git@gitlab.com:Sparkpad/SparkPos-GP-Kindee.git",
          "branch": "gp"
        },
        "reportingsys": {
          "giturl": "git@git.coding.net:chankongching/reports.git",
          "branch": "liansuola"
        },
        "syncoc": {
          "giturl": "git@git.coding.net:keithyau/syncoc.git",
          "branch": "master"
        },
        "orderserver": {
          "giturl": "git@git.coding.net:shiyang1983/orderserver.git",
          "branch": "master"
        },
        "wmserver": {
          "giturl": "git@git.coding.net:shiyang1983/gtdx_wmserver.git",
          "branch": "master"
        },
        "couchdb": "nodownload",
        "bootproxy": "nodownload",
        "rabbitmq": "nodownload",
        "redis-report": "nodownload"
      },
      "runtime": {
        "redis-report": {
          "tag": "latest",
          "image": "redis",
          "memory_limit": 547483648,
          "ports": "6379:6379"
        },
        "rabbitmq": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/rmq",
          "exec": "sleep 40;/bin/bash /setup",
          "ports": [
            "5672:5672",
            "15672:15672"
          ]
        },
        "pmt": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_PMT_GP2"],
          "mountlocal": "localdir",
          "mountdocker": "/var/www/html",
          "ports": "9082:80",
          "customdomainsuffix": ".gtdx"
        },
        "de": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_DE_GP2"],
          "mountlocal": "localdir",
          "mountdocker": "/var/www/html",
          "ports": "9083:80",
          "customdomainsuffix": ".gtdx"
        },
        "erp": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_ERP_GP2"],
          "mountlocal": "localdir",
          "mountdocker": "/var/www/html",
          "ports": "9084:80",
          "customdomainsuffix": ".gtdx"
        },
        "oc": {
          "tag": "7.1.4_v4",
          "image": "dockerpriv.kybot.io:5002/keithyau/drupalnginxphp7shanghai",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_OC_GP2"],
          "mountlocal": "localdir",
          "mountdocker": "/var/www/html",
          "ports": "9085:80",
          "customdomainsuffix": ".gtdx"
        },
        "reportingsys": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/laravelnewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_REPORT_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/reportingsys:/var/www/html/",
            "/home/ec2-user/tools/drupal_dir/reportingsys_configuration/report-gtdx2-connect:/var/www/html/config/externa_connection_db.php",
            "/home/ec2-user/tools/drupal_dir/reportingsys_configuration/report-gtdx2.env:/var/www/html/.env",
            "/home/ec2-user/tools/drupal_dir/reportingsys_configuration/report-gtdx2-redis:/var/www/html/config/database.php"
          ],
          "ports": "9086:80",
          "overridesubdomain": "reports.gtdx"
        },
        "orderserver": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/tomcatsparkpadglusternewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_ORDERSERVER_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/orderserver:/usr/local/tomcat/webapps/ROOT",
            "/etc/localtime:/etc/localtime:ro"
          ],
          "ports": "9087:8080",
          "customdomainsuffix": ".gtdx"
        },
        "wmserver": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/tomcatsparkpadglusternewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_WMSERVER_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/wmserver:/usr/local/tomcat/webapps/ROOT",
            "/etc/localtime:/etc/localtime:ro",
            "/bin/vi:/bin/vi"
          ],
          "ports": "9088:8080",
          "overridesubdomain": "takeaway-wm.gtdx"
        },
        "syncoc": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/tomcatsparkpadglusternewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_SYNCOC_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/syncoc:/usr/local/tomcat/webapps",
            "/etc/localtime:/etc/localtime:ro"
          ],
          "ports": "9089:8080"
        },
        "couchdb": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/couchdb",
          "env": ["PATH=/opt/couchdb/bin:/usr/local/bin:/usr/local/sbin:/usr/sbin:/usr/bin:/bin:$PATH", "COUCHDB_USER=ymeng", "COUCHDB_PASSWORD=111111"],
          "mountlocal": "localdir",
          "mountdocker": "/opt/couchdb/data",
          "ports": "9090:5984",
          "overridesubdomain": "couchdb-cloud.gtdx"
        },
        "oc": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/tomcatsparkpadglusternewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_TMOC_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/oc:/usr/local/tomcat/webapps",
            "/etc/localtime:/etc/localtime:ro"
          ],
          "ports": "9091:8080",
          "customdomainsuffix": ".gtdx"
        },
        "tsoc": {
          "tag": "latest",
          "image": "dockerpriv.kybot.io:5002/keithyau/tomcatsparkpadglusternewrelic",
          "env": ["NEWRELICKEY=839e85790a22ffa6ed5818850d8fc3307d92e072", "NEWRELICAPPNAME=GTDX_TMTSOC_GP2"],
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/drupal_dir/tsoc:/usr/local/tomcat/webapps",
            "/etc/localtime:/etc/localtime:ro"
          ],
          "ports": "9092:8080",
          "customdomainsuffix": ".gtdx"
        },
        "bootproxy": {
          "tag": "stable-alpine",
          "image": "daocloud.io/library/nginx",
          "mountlocal": "multipledir",
          "mountdocker": [
            "/home/ec2-user/tools/bootproxy:/etc/nginx/conf.d/",
            "/etc/letsencrypt/archive/:/root"
          ],
          "ports": [
            "80:80",
            "8080:8080"
          ]
        }
      }
    }
  },
  "override_attributes": {},
  "chef_type": "role",
  "run_list": [
    "recipe[git]",
    "recipe[build-essential]",
    "recipe[basicservice]",
    "recipe[deploycode]",
    "recipe[configs]",
    "recipe[drupalsetting]",
    "recipe[webserver]"
  ],
  "env_run_lists": {}
}
